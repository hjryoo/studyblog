[build]
publish = "_site"
command = "bundle exec jekyll build"

[build.environment]
JEKYLL_ENV = "production"
BUNDLE_JOBS = "4"
BUNDLE_RETRY = "3"
BUNDLE_WITHOUT = "test"
# bundler가 vendor/bundle 같은 곳에 깔려서 캐시효율/권한문제 나는 걸 방지
BUNDLE_PATH = "/opt/build/cache/bundle"

# 선택: Jekyll의 캐시를 켜서 다음 빌드를 더 빠르게
JEKYLL_CACHE_DIR = ".jekyll-cache"

# ✅ 아주 중요: ruby 버전 통일이 끝난 뒤에만 사용 권장
# (캐시가 깨진 상태에서 incremental은 효과 거의 없음)
# command = "bundle exec jekyll build --incremental"

[[plugins]]
package = "netlify-plugin-jekyll-cache"
